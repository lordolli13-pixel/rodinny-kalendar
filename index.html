<!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
<title>Samsung Optimized Calendar</title>
<style>
:root {
  --app-bg: #121212;
  --panel-bg: #1E1E1E;
  --accent-blue: #7CD1E9;
  --text-main: #FFFFFF;
  --text-muted: #B0B0B0;
  --gold: #FFB347;
  --safe-top: env(safe-area-inset-top, 0px);
}

* { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

body {
  margin: 0;
  padding: 0;
  background-color: var(--app-bg);
  color: var(--text-main);
  font-family: "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
  overflow-x: hidden;
}

/* Hlavn√≠ kontejner na celou ≈°√≠≈ôku */
.wrap {
  width: 100%;
  max-width: 100vw;
  display: flex;
  flex-direction: column;
  min-height: 100vh;
  padding-top: var(--safe-top);
}

/* Header - Zvƒõt≈°en√Ω pro telefony */
header {
  background: var(--panel-bg);
  padding: 20px 15px;
  border-bottom: 1px solid #333;
  position: sticky;
  top: 0;
  z-index: 100;
}

.brand-title {
  color: var(--accent-blue);
  font-weight: 900;
  font-size: 24px;
  text-align: center;
  margin-bottom: 15px;
  letter-spacing: 2px;
}

.controls {
  display: flex;
  gap: 10px;
  justify-content: space-between;
}

.btn, .select {
  background: #2A2A2A;
  border: 1px solid #444;
  color: #fff;
  padding: 15px; /* Velk√° plocha pro dotyk */
  border-radius: 12px;
  font-size: 16px;
  flex: 1;
  text-align: center;
}

.btn-accent {
  background: var(--accent-blue);
  color: #000;
  font-weight: bold;
  border: none;
}

/* Kalend√°≈ô - Rozta≈æen√Ω na display */
.main-grid-container {
  padding: 10px 5px;
  flex-grow: 1;
}

.month-label {
  font-size: 28px;
  font-weight: 800;
  text-align: center;
  margin: 15px 0;
}

.grid {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  gap: 4px;
  width: 100%;
}

.weekday {
  color: var(--accent-blue);
  text-align: center;
  font-weight: 800;
  font-size: 13px;
  padding-bottom: 10px;
}

.day {
  background: #1E1E1E;
  aspect-ratio: 1/1.3;
  border-radius: 10px;
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 8px 2px;
  position: relative;
  border: 1px solid #2A2A2A;
}

.day.today {
  border: 2px solid var(--accent-blue);
  background: rgba(124, 209, 233, 0.1);
}

.day-num {
  font-size: 18px;
  font-weight: 800;
}

.day.weekend .day-num { color: var(--gold); }

.nameday-mini {
  font-size: 9px;
  color: var(--text-muted);
  text-align: center;
  margin-top: 2px;
  display: block;
}

.dots {
  display: flex;
  gap: 3px;
  margin-top: auto;
}

.dot { width: 6px; height: 6px; border-radius: 50%; }

/* Sidebar - Na mobilu pod sebou a ƒçiteln√Ω */
.sidebar {
  background: #181818;
  padding: 20px 10px;
}

.mini-year {
  display: grid;
  grid-template-columns: repeat(2, 1fr); /* 2 sloupce na mobilu vedle sebe */
  gap: 15px;
}

.mini-mo {
  background: #222;
  padding: 10px;
  border-radius: 15px;
  border: 1px solid #333;
}

.mini-title {
  color: var(--accent-blue);
  font-size: 14px;
  font-weight: bold;
  text-align: center;
  margin-bottom: 5px;
}

.mini-grid {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  gap: 2px;
  font-size: 10px;
  text-align: center;
  color: #ccc; /* Zv√Ω≈°en√Ω kontrast */
}

/* Mod√°ln√≠ okno - Fullscreen na mobilu */
.modal-bg {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.95);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 1000;
}

.modal {
  width: 90%;
  max-height: 80vh;
  background: #252525;
  border-radius: 25px;
  padding: 25px;
  overflow-y: auto;
}

.modal input, .modal select, .modal textarea {
  width: 100%;
  padding: 18px;
  margin-bottom: 15px;
  border-radius: 12px;
  background: #111;
  border: 1px solid #444;
  color: #fff;
  font-size: 16px;
}

/* Skryt√≠ scrollbaru */
::-webkit-scrollbar { display: none; }

@media (min-width: 800px) {
  .wrap { flex-direction: row; }
  header { width: 300px; height: 100vh; position: sticky; top: 0; }
  .main-grid-container { flex-grow: 1; }
  .mini-year { grid-template-columns: repeat(2, 1fr); }
}
</style>
</head>
<body>

<div class="wrap">
  <header>
    <div class="brand-title">KALEND√Å≈ò</div>
    <div class="controls">
      <button class="btn" onclick="moveMonth(-1)">‚ùÆ</button>
      <button class="btn btn-accent" onclick="goToday()">DNES</button>
      <button class="btn" onclick="moveMonth(1)">‚ùØ</button>
    </div>
    <div style="margin-top:15px; display: flex; gap:10px;">
       <select id="moSel" class="select"></select>
       <select id="yrSel" class="select"></select>
    </div>
  </header>

  <div class="main-grid-container">
    <div class="month-label" id="moLab">Leden 2026</div>
    <div class="grid" id="mainGrid"></div>
  </div>

  <aside class="sidebar">
    <div style="color: var(--accent-blue); margin-bottom: 15px; font-weight: bold; text-align: center;">P≈òEHLED ROKU</div>
    <div class="mini-year" id="yearGrid"></div>
  </aside>
</div>

<div class="modal-bg" id="modalBg">
  <div class="modal">
    <h2 id="modalTitle" style="color:var(--accent-blue)">Detail</h2>
    <div id="evList" style="margin-bottom:20px;"></div>
    <input type="text" id="addN" placeholder="Kdo m√° ud√°lost?">
    <select id="addT">
      <option value="bday">üéÇ Narozeniny</option>
      <option value="nameday">üå∏ Sv√°tek</option>
      <option value="anniv">üíç V√Ωroƒç√≠</option>
    </select>
    <button class="btn btn-accent" style="width:100%;" onclick="save()">ULO≈ΩIT</button>
    <button onclick="closeModal()" style="width:100%; background:none; border:none; color:#777; margin-top:20px; font-size:16px;">ZAV≈ò√çT</button>
  </div>
</div>

<script>
// Data sv√°tk≈Ø zkr√°cena pro uk√°zku, vlo≈æte sv√° kompletn√≠ data zde
const czNamedays = {"0-1":"Nov√Ω rok","1-14":"Valent√Ωn","11-24":"V√°noce"}; // ... atd
const months = ["Leden","√önor","B≈ôezen","Duben","Kvƒõten","ƒåerven","ƒåervenec","Srpen","Z√°≈ô√≠","≈ò√≠jen","Listopad","Prosinec"];
let curYear = 2026, curMonth = new Date().getMonth();
let events = JSON.parse(localStorage.getItem('fam_cal_samsung') || '{}');
let activeKey = "";

function init() {
  const ms = document.getElementById('moSel'), ys = document.getElementById('yrSel');
  months.forEach((m,i)=> ms.innerHTML+=`<option value="${i}">${m}</option>`);
  for(let y=2024;y<=2030;y++) ys.innerHTML+=`<option value="${y}">${y}</option>`;
  ms.onchange = e => { curMonth=parseInt(e.target.value); render(); };
  ys.onchange = e => { curYear=parseInt(e.target.value); render(); };
  render();
}

function render() {
  document.getElementById('moLab').innerText = months[curMonth] + " " + curYear;
  const grid = document.getElementById('mainGrid'); grid.innerHTML = "";
  ["Po","√öt","St","ƒåt","P√°","So","Ne"].forEach(d => grid.innerHTML+=`<div class="weekday">${d}</div>`);

  const first = (new Date(curYear, curMonth, 1).getDay() || 7) - 1;
  const days = new Date(curYear, curMonth+1, 0).getDate();

  for(let i=0; i<first; i++) grid.innerHTML += `<div></div>`;
  for(let d=1; d<=days; d++) {
    const k = `${curMonth}-${d}`, evs = events[k] || [];
    const isToday = (d===new Date().getDate() && curMonth===new Date().getMonth() && curYear===new Date().getFullYear());
    const isWeekend = (new Date(curYear, curMonth, d).getDay() % 6 === 0);
    
    let dots = "";
    evs.forEach(e => dots += `<div class="dot" style="background:var(--accent-blue)"></div>`);

    grid.innerHTML += `
      <div class="day ${isToday?'today':''} ${isWeekend?'weekend':''}" onclick="openDay(${curMonth},${d})">
        <div class="day-num">${d}</div>
        <div class="nameday-mini">${czNamedays[k]||''}</div>
        <div class="dots">${dots}</div>
      </div>`;
  }
  renderYear();
}

function renderYear() {
  const yg = document.getElementById('yearGrid'); yg.innerHTML = "";
  for(let m=0; m<12; m++) {
    const md = new Date(curYear, m+1, 0).getDate();
    let dDivs = "";
    for(let d=1; d<=md; d++) {
      const has = events[`${m}-${d}`];
      dDivs += `<div style="${has?'color:var(--accent-blue);font-weight:bold':''}; opacity:${has?1:0.4}">${d}</div>`;
    }
    yg.innerHTML += `
      <div class="mini-mo" onclick="changeMo(${m})">
        <div class="mini-title">${months[m]}</div>
        <div class="mini-grid">${dDivs}</div>
      </div>`;
  }
}

function openDay(m,d) {
  activeKey = `${m}-${d}`;
  document.getElementById('modalTitle').innerText = `${d}. ${months[m]}`;
  const list = document.getElementById('evList'); list.innerHTML = "";
  (events[activeKey]||[]).forEach((e,i) => {
    list.innerHTML += `<div style="padding:10px; background:#333; margin-bottom:5px; border-radius:10px; display:flex; justify-content:space-between">
      ${e.n} <span onclick="del(${i})">‚úï</span>
    </div>`;
  });
  document.getElementById('modalBg').style.display = "flex";
}

function save() {
  const n = document.getElementById('addN').value;
  if(!n) return;
  if(!events[activeKey]) events[activeKey] = [];
  events[activeKey].push({n, t: document.getElementById('addT').value});
  localStorage.setItem('fam_cal_samsung', JSON.stringify(events));
  document.getElementById('addN').value = "";
  closeModal(); render();
}

function changeMo(m) { curMonth = m; render(); window.scrollTo(0,0); }
function moveMonth(v) { curMonth+=v; if(curMonth>11){curMonth=0;curYear++} if(curMonth<0){curMonth=11;curYear--} render(); }
function goToday() { const n=new Date(); curYear=n.getFullYear(); curMonth=n.getMonth(); render(); }
function closeModal() { document.getElementById('modalBg').style.display = "none"; }

init();
</script>
</body>
</html>
