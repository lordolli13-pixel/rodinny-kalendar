<!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0,viewport-fit=cover" />
<title>Profi Family Kalend√°≈ô 2026</title>
<style>
:root {
  --bg: #0a0f1a;
  --panel: rgba(255, 255, 255, 0.05);
  --border: rgba(255, 255, 255, 0.1);
  --gold: #d99a3f;
  --text: #ffffff;
  --muted: #9aa6b6;
  --clr-bday: #f59e0b;
  --clr-nameday: #10b981;
  --clr-anniv: #ec4899;
  font-family: 'Inter', system-ui, sans-serif;
}

body {
  margin:0; min-height: 100vh;
  background: radial-gradient(circle at top right, #1e293b, #0a0f1a);
  color: var(--text); padding: 10px;
}

.wrap { max-width: 1200px; margin: 0 auto; display: flex; flex-direction: column; gap: 12px; }

.glass {
  background: var(--panel); backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px);
  border: 1px solid var(--border); border-radius: 18px;
}

.header { padding: 15px; display: flex; flex-direction: column; gap: 12px; }
.brand { text-align: center; }
.brand .title { font-weight: 800; font-size: 20px; color: var(--gold); letter-spacing: 1px; }

.controls { display: flex; gap: 8px; flex-wrap: wrap; justify-content: center; }
.btn, .select {
  background: rgba(255,255,255,0.08); border: 1px solid var(--border);
  color: #fff; padding: 12px; border-radius: 12px; cursor: pointer; font-size: 15px;
}
.btn-gold {
  background: var(--gold); color: #000; font-weight: bold; border: none;
  padding: 12px 18px; border-radius: 12px; cursor: pointer; font-size: 15px;
}

/* Styl pro p≈ôep√≠naƒç Zobrazen√≠ */
.view-toggle {
    display: flex;
    background: rgba(0,0,0,0.3);
    padding: 4px;
    border-radius: 14px;
    margin: 0 auto;
    width: fit-content;
}
.toggle-btn {
    padding: 8px 16px;
    border-radius: 10px;
    border: none;
    background: transparent;
    color: var(--muted);
    cursor: pointer;
    font-weight: bold;
    transition: 0.3s;
}
.toggle-btn.active {
    background: var(--gold);
    color: #000;
}

.month-view, .year-view { display: none; width: 100%; }
.active-view { display: block; }

.month-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 5px; margin-top: 15px;}
.weekday { font-size: 10px; color: var(--gold); text-align: center; font-weight: bold; padding: 5px 0; }

.day {
  min-height: 95px; padding: 6px; border-radius: 12px;
  background: rgba(0,0,0,0.25); border: 1px solid var(--border);
  cursor: pointer; display: flex; flex-direction: column; gap: 3px;
}
.day.today { border-color: var(--gold); background: rgba(217, 154, 63, 0.1); }
.day-num { font-weight: bold; font-size: 14px; }
.nameday-label { font-size: 9px; color: var(--muted); font-style: italic; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }

.ev-tag { font-size: 9px; padding: 3px 5px; border-radius: 5px; color: #000; font-weight: bold; margin-bottom: 2px; }

/* Celoroƒçn√≠ n√°hled - m≈ô√≠≈æka mƒõs√≠c≈Ø */
.full-year-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 15px;
    padding: 15px;
}
.mini-month {
    background: rgba(0,0,0,0.2);
    padding: 10px;
    border-radius: 15px;
    border: 1px solid var(--border);
}
.mini-days-grid {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    gap: 2px;
    font-size: 10px;
    text-align: center;
}

.modal-bg {
  position: fixed; inset: 0; background: rgba(0,0,0,0.85); backdrop-filter: blur(8px);
  display: none; align-items: center; justify-content: center; z-index: 1000;
}
.modal-bg.show { display: flex; }
.modal { background: #161b26; padding: 25px; border-radius: 24px; width: 92%; max-width: 400px; border: 1px solid var(--gold); }
</style>
</head>
<body>

<div class="wrap">
  <header class="glass">
    <div class="header">
      <div class="brand"><div class="title">RODINN√ù KALEND√Å≈ò</div></div>
      
      <div class="view-toggle">
        <button class="toggle-btn active" onclick="switchView('month')">Mƒõs√≠c</button>
        <button class="toggle-btn" onclick="switchView('year')">Cel√Ω rok</button>
      </div>

      <div class="controls" id="monthControls">
        <button class="btn" onclick="changeMonth(-1)">‚óÄ</button>
        <select id="monthSelect" class="select" onchange="setMonth(this.value)"></select>
        <select id="yearSelect" class="select" onchange="setYear(this.value)"></select>
        <button class="btn" onclick="changeMonth(1)">‚ñ∂</button>
      </div>
    </div>
  </header>

  <main class="glass" style="min-height: 60vh;">
    <div id="monthView" class="month-view active-view" style="padding: 15px;">
        <h2 id="monthLabel" style="text-align:center; color: var(--gold); margin-top:0;"></h2>
        <div class="month-grid" id="mainGrid"></div>
    </div>

    <div id="yearView" class="year-view">
        <div class="full-year-grid" id="fullYearGrid"></div>
    </div>
  </main>
</div>

<div class="modal-bg" id="modalBg">
    <div class="modal">
        <h3 id="modalTitle" style="color:var(--gold); margin-top:0;">Upravit den</h3>
        <div id="eventList"></div>
        <div id="editForm" style="margin-top:15px">
            <input type="text" id="addName" style="width:100%; padding:10px; margin-bottom:10px" placeholder="Jm√©no...">
            <select id="addType" style="width:100%; padding:10px; margin-bottom:10px">
                <option value="bday">üéÇ Narozeniny</option>
                <option value="anniv">üíç Ud√°lost</option>
            </select>
            <button class="btn-gold" style="width:100%" onclick="saveEvent()">ULO≈ΩIT</button>
        </div>
        <button onclick="closeModal()" style="width:100%; background:none; border:none; color:var(--muted); margin-top:15px;">Zav≈ô√≠t</button>
    </div>
</div>

<script>
// Pomocn√° data a stav
const months = ["Leden","√önor","B≈ôezen","Duben","Kvƒõten","ƒåerven","ƒåervenec","Srpen","Z√°≈ô√≠","≈ò√≠jen","Listopad","Prosinec"];
let curYear = 2026, curMonth = new Date().getMonth();
let events = JSON.parse(localStorage.getItem('family_cal_v8') || '{}');
let editDateKey = null;

// Inicializace
function init() {
    const ms = document.getElementById('monthSelect');
    const ys = document.getElementById('yearSelect');
    months.forEach((m, i) => ms.innerHTML += `<option value="${i}">${m}</option>`);
    for(let y=2024; y<=2030; y++) ys.innerHTML += `<option value="${y}">${y}</option>`;
    render();
}

function switchView(view) {
    document.querySelectorAll('.toggle-btn').forEach(b => b.classList.remove('active'));
    document.getElementById('monthView').classList.remove('active-view');
    document.getElementById('yearView').classList.remove('active-view');
    document.getElementById('monthControls').style.display = (view === 'month') ? 'flex' : 'none';

    if(view === 'month') {
        document.querySelectorAll('.toggle-btn')[0].classList.add('active');
        document.getElementById('monthView').classList.add('active-view');
    } else {
        document.querySelectorAll('.toggle-btn')[1].classList.add('active');
        document.getElementById('yearView').classList.add('active-view');
        renderFullYear();
    }
}

function render() {
    document.getElementById('monthSelect').value = curMonth;
    document.getElementById('yearSelect').value = curYear;
    document.getElementById('monthLabel').innerText = `${months[curMonth]} ${curYear}`;
    
    const grid = document.getElementById('mainGrid');
    grid.innerHTML = "";
    ["Po","√öt","St","ƒåt","P√°","So","Ne"].forEach(w => grid.innerHTML += `<div class="weekday">${w}</div>`);
    
    const first = (new Date(curYear, curMonth, 1).getDay() || 7) - 1;
    const days = new Date(curYear, curMonth + 1, 0).getDate();
    
    for(let i=0; i<first; i++) grid.innerHTML += `<div></div>`;
    for(let d=1; d<=days; d++) {
        const k = `${curMonth}-${d}`;
        const isToday = (d===new Date().getDate() && curMonth===new Date().getMonth());
        const evs = events[k] || [];
        let h = "";
        evs.forEach(e => h += `<div class="ev-tag" style="background:${e.type==='bday'?'#f59e0b':'#ec4899'}">${e.n}</div>`);
        
        grid.innerHTML += `<div class="day ${isToday?'today':''}" onclick="openEdit(${curMonth},${d})">
            <div class="day-num">${d}</div>
            ${h}
        </div>`;
    }
}

function renderFullYear() {
    const container = document.getElementById('fullYearGrid');
    container.innerHTML = "";
    for(let m=0; m<12; m++) {
        let daysHtml = "";
        const first = (new Date(curYear, m, 1).getDay() || 7) - 1;
        const days = new Date(curYear, m + 1, 0).getDate();
        
        for(let i=0; i<first; i++) daysHtml += `<div></div>`;
        for(let d=1; d<=days; d++) {
            const hasEv = events[`${m}-${d}`];
            daysHtml += `<div style="${hasEv?'color:var(--gold);font-weight:bold':''}">${d}</div>`;
        }
        
        container.innerHTML += `
            <div class="mini-month" onclick="curMonth=${m}; switchView('month'); render();">
                <div style="text-align:center; color:var(--gold); font-weight:bold; margin-bottom:5px;">${months[m]}</div>
                <div class="mini-days-grid">${daysHtml}</div>
            </div>`;
    }
}

// Obsluha ud√°lost√≠
function openEdit(m, d) {
    editDateKey = `${m}-${d}`;
    document.getElementById('modalTitle').innerText = `${d}. ${months[m]}`;
    document.getElementById('modalBg').classList.add('show');
    const list = document.getElementById('eventList');
    list.innerHTML = "";
    (events[editDateKey] || []).forEach((ev, i) => {
        list.innerHTML += `<div style="background:rgba(255,255,255,0.1); padding:10px; margin-bottom:5px; border-radius:8px; display:flex; justify-content:space-between">
            <span>${ev.n}</span> <span onclick="deleteEv(${i})" style="color:red; cursor:pointer">‚úï</span>
        </div>`;
    });
}

function saveEvent() {
    const name = document.getElementById('addName').value;
    if(!name) return;
    if(!events[editDateKey]) events[editDateKey] = [];
    events[editDateKey].push({ n: name, type: document.getElementById('addType').value });
    localStorage.setItem('family_cal_v8', JSON.stringify(events));
    document.getElementById('addName').value = "";
    closeModal(); render();
}

function deleteEv(i) {
    events[editDateKey].splice(i, 1);
    localStorage.setItem('family_cal_v8', JSON.stringify(events));
    openEdit(...editDateKey.split('-')); render();
}

function closeModal() { document.getElementById('modalBg').classList.remove('show'); }
function changeMonth(v) { curMonth += v; if(curMonth<0){curMonth=11; curYear--;} if(curMonth>11){curMonth=0; curYear++;} render(); }
function setMonth(v) { curMonth = parseInt(v); render(); }
function setYear(v) { curYear = parseInt(v); render(); }

init();
</script>
</body>
</html>
