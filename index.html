<!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0" />
<title>Profi Family Kalend√°≈ô 2026</title>
<style>
:root {
  --bg: #0a0f1a;
  --panel: rgba(255, 255, 255, 0.05);
  --border: rgba(255, 255, 255, 0.1);
  --gold: #d99a3f;
  --text: #ffffff;
  --muted: #9aa6b6;
  --clr-bday: #f59e0b;
  --clr-nameday: #10b981;
  --clr-anniv: #ec4899;
  font-family: 'Inter', system-ui, sans-serif;
}

body {
  margin:0; min-height: 100vh;
  background: #0a0f1a;
  color: var(--text);
  padding: 0;
  overflow-x: hidden;
}

/* Fixn√≠ z√°hlav√≠ pro mobil */
header {
  position: sticky; top: 0; z-index: 100;
  background: rgba(10, 15, 26, 0.9);
  backdrop-filter: blur(15px);
  border-bottom: 1px solid var(--border);
  padding: 10px 15px;
}

.brand { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
.brand .title { font-weight: 900; font-size: 16px; color: var(--gold); letter-spacing: 1px; }

/* P≈ôep√≠naƒç pohled≈Ø (Toggle) */
.view-switch {
  display: flex; background: var(--panel); border-radius: 12px; padding: 3px; margin-bottom: 10px;
}
.view-switch button {
  flex: 1; border: none; background: transparent; color: var(--muted); 
  padding: 8px; border-radius: 10px; font-weight: bold; cursor: pointer; transition: 0.3s;
}
.view-switch button.active { background: var(--gold); color: #000; }

.controls { display: flex; gap: 8px; align-items: center; }
.select {
  background: var(--panel); border: 1px solid var(--border);
  color: #fff; padding: 10px; border-radius: 10px; flex: 1; font-size: 14px;
}
.btn-nav { background: var(--panel); border: 1px solid var(--border); color: #fff; padding: 10px 15px; border-radius: 10px; }

/* Horizont√°ln√≠ scroll pro jm√©na */
.filter-bar { padding: 10px 0; overflow-x: auto; white-space: nowrap; -webkit-overflow-scrolling: touch; }
.filter-bar::-webkit-scrollbar { display: none; }
.tag-btn { 
  display: inline-block; background: var(--panel); border: 1px solid var(--border); 
  color: #fff; padding: 8px 15px; border-radius: 20px; font-size: 12px; margin-right: 8px;
}

/* Hlavn√≠ kontejnery */
.main-content { padding: 15px; }
.view-section { display: none; }
.view-section.active { display: block; }

/* Mƒõs√≠ƒçn√≠ m≈ô√≠≈æka - Mobiln√≠ styl */
.month-label { font-size: 24px; font-weight: 800; margin-bottom: 15px; color: #fff; }
.month-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 2px; background: var(--border); border: 1px solid var(--border); border-radius: 15px; overflow: hidden; }
.weekday { background: rgba(255,255,255,0.03); font-size: 10px; color: var(--gold); text-align: center; padding: 10px 0; font-weight: bold; }
.day {
  background: #0a0f1a; min-height: 70px; padding: 5px; position: relative;
  display: flex; flex-direction: column; align-items: center;
}
.day.today { background: rgba(217, 154, 63, 0.15); box-shadow: inset 0 0 0 1px var(--gold); }
.day.weekend { background: rgba(255, 255, 255, 0.02); }
.day-num { font-weight: bold; font-size: 14px; margin-bottom: 2px; }
.nameday-label { font-size: 7px; color: var(--muted); text-align: center; height: 10px; overflow: hidden; margin-bottom: 4px; }

/* Teƒçky pod dnem */
.dots { display: flex; gap: 2px; justify-content: center; flex-wrap: wrap; }
.dot { width: 6px; height: 6px; border-radius: 50%; }

/* Roƒçn√≠ pohled - Rolovateln√© velk√© mƒõs√≠ce */
.year-scroll-list { display: flex; flex-direction: column; gap: 30px; }
.year-month-card { background: var(--panel); border-radius: 20px; padding: 15px; border: 1px solid var(--border); }
.year-month-title { font-size: 18px; font-weight: bold; color: var(--gold); margin-bottom: 10px; text-transform: uppercase; }

/* Modal - Mobiln√≠ "Bottom Sheet" styl */
.modal-bg {
  position: fixed; inset: 0; background: rgba(0,0,0,0.9); z-index: 1000;
  display: none; align-items: flex-end;
}
.modal-bg.show { display: flex; }
.modal { 
  background: #161b26; width: 100%; border-radius: 25px 25px 0 0; padding: 25px; 
  box-sizing: border-box; border-top: 2px solid var(--gold);
}
.modal input, .modal select, .modal textarea {
  width: 100%; margin-bottom: 12px; padding: 15px; border-radius: 12px;
  background: #000; border: 1px solid var(--border); color: #fff; font-size: 16px; box-sizing: border-box;
}

.ev-item {
    background: rgba(255,255,255,0.05); padding: 12px; border-radius: 12px; margin-bottom: 10px;
    display: flex; justify-content: space-between; align-items: center;
}
</style>
</head>
<body>

<header>
  <div class="brand">
    <div class="title">FAMILY CALENDAR</div>
    <button class="btn-gold" id="todayBtn">DNES</button>
  </div>

  <div class="view-switch">
    <button id="btnMonthView" class="active">MƒöS√çC</button>
    <button id="btnYearView">ROK</button>
  </div>

  <div class="controls" id="monthControls">
    <button class="btn-nav" id="prevMonth">‚óÄ</button>
    <select id="monthSelect" class="select"></select>
    <select id="yearSelect" class="select"></select>
    <button class="btn-nav" id="nextMonth">‚ñ∂</button>
  </div>

  <div class="filter-bar" id="nameTags"></div>
</header>

<main class="main-content">
  <section id="monthSection" class="view-section active">
    <div id="monthLabel" class="month-label">Leden 2026</div>
    <div class="month-grid" id="mainGrid"></div>
  </section>

  <section id="yearSection" class="view-section">
    <div class="year-scroll-list" id="yearScrollList"></div>
  </section>
</main>

<div class="modal-bg" id="modalBg">
  <div class="modal">
    <div style="width: 50px; height: 5px; background: var(--border); border-radius: 10px; margin: -10px auto 20px;"></div>
    <h3 id="modalTitle" style="color:var(--gold); margin:0 0 20px 0;">Detail dne</h3>
    <div id="eventList"></div>
    
    <div id="editForm">
      <input type="text" id="addName" placeholder="Jm√©no...">
      <div style="display:flex; gap:10px;">
        <select id="addType" style="flex:2">
            <option value="bday">üéÇ Narozeniny</option>
            <option value="nameday">üå∏ Sv√°tek</option>
            <option value="anniv">üíç V√Ωroƒç√≠</option>
        </select>
        <input type="number" id="addYear" placeholder="Rok" style="flex:1">
      </div>
      <textarea id="addNote" placeholder="Pozn√°mka..." rows="2"></textarea>
      <button class="btn-gold" style="width:100%; padding:18px;" id="saveBtn">ULO≈ΩIT</button>
    </div>
    <button onclick="closeModal()" style="width:100%; background:none; border:none; color:var(--muted); margin-top:20px; font-weight:bold;">ZAV≈ò√çT</button>
  </div>
</div>

<script>
// Pomocn√° data (zkr√°ceno pro uk√°zku)
const czNamedays = {"0-1":"Nov√Ω rok","0-6":"T≈ôi kr√°lov√©","1-14":"Valent√Ωn","2-19":"Josef","3-24":"Ji≈ô√≠","4-1":"Sv√°tek pr√°ce","4-8":"V√≠tƒõzstv√≠","6-5":"Cyril/Metodƒõj","6-6":"Jan Hus","9-28":"V√°clav","10-28":"Vznik ƒåSR","11-17":"Demokracie","11-24":"Adam/Eva","11-25":"1.sv√°tek","11-26":"2.sv√°tek"};
const months = ["Leden","√önor","B≈ôezen","Duben","Kvƒõten","ƒåerven","ƒåervenec","Srpen","Z√°≈ô√≠","≈ò√≠jen","Listopad","Prosinec"];
const cats = { bday: { c: 'var(--clr-bday)', i: 'üéÇ' }, nameday: { c: 'var(--clr-nameday)', i: 'üå∏' }, anniv: { c: 'var(--clr-anniv)', i: 'üíç' } };

let curYear = 2026, curMonth = new Date().getMonth(), events = JSON.parse(localStorage.getItem('family_cal_v11') || '{}'), editKey = null;

function init() {
    months.forEach((m,i) => document.getElementById('monthSelect').innerHTML += `<option value="${i}">${m}</option>`);
    for(let y=2024; y<=2030; y++) document.getElementById('yearSelect').innerHTML += `<option value="${y}">${y}</option>`;
    
    // P≈ôep√≠n√°n√≠ pohled≈Ø
    document.getElementById('btnMonthView').onclick = () => switchView('month');
    document.getElementById('btnYearView').onclick = () => switchView('year');

    document.getElementById('prevMonth').onclick = () => { curMonth--; if(curMonth<0){curMonth=11; curYear--;} render(); };
    document.getElementById('nextMonth').onclick = () => { curMonth++; if(curMonth>11){curMonth=0; curYear++;} render(); };
    document.getElementById('monthSelect').onchange = (e) => { curMonth = parseInt(e.target.value); render(); };
    document.getElementById('yearSelect').onchange = (e) => { curYear = parseInt(e.target.value); render(); };
    document.getElementById('todayBtn').onclick = () => { const n=new Date(); curYear=n.getFullYear(); curMonth=n.getMonth(); render(); };

    render();
}

function switchView(view) {
    document.getElementById('btnMonthView').classList.toggle('active', view==='month');
    document.getElementById('btnYearView').classList.toggle('active', view==='year');
    document.getElementById('monthSection').classList.toggle('active', view==='month');
    document.getElementById('yearSection').classList.toggle('active', view==='year');
    document.getElementById('monthControls').style.display = view==='month' ? 'flex' : 'none';
}

function closeModal() { document.getElementById('modalBg').classList.remove('show'); }

function openDay(m, d) {
    editKey = `${m}-${d}`;
    document.getElementById('modalTitle').innerText = `${d}. ${months[m]} ${curYear}`;
    const list = document.getElementById('eventList'); list.innerHTML = "";
    (events[editKey] || []).forEach((ev, i) => {
        const age = (ev.type==='bday' && ev.y) ? ` (${curYear - ev.y} let)` : "";
        list.innerHTML += `<div class="ev-item" style="border-left:4px solid ${cats[ev.type].c}">
            <span>${cats[ev.type].i} ${ev.n}${age}</span>
            <button onclick="delEv('${editKey}',${i})" style="background:none; border:none; color:red; font-size:20px;">‚úï</button>
        </div>`;
    });
    document.getElementById('modalBg').classList.add('show');
}

function delEv(key, i) { events[key].splice(i,1); if(!events[key].length) delete events[key]; localStorage.setItem('family_cal_v11', JSON.stringify(events)); openDay(...key.split('-')); render(); }

document.getElementById('saveBtn').onclick = () => {
    const n = document.getElementById('addName').value.trim();
    if(!n) return;
    if(!events[editKey]) events[editKey] = [];
    events[editKey].push({ n, type: document.getElementById('addType').value, y: parseInt(document.getElementById('addYear').value), note: document.getElementById('addNote').value });
    localStorage.setItem('family_cal_v11', JSON.stringify(events));
    document.getElementById('addName').value = ""; render(); openDay(...editKey.split('-'));
};

function render() {
    document.getElementById('monthSelect').value = curMonth;
    document.getElementById('yearSelect').value = curYear;
    document.getElementById('monthLabel').innerText = `${months[curMonth]} ${curYear}`;
    
    // Mƒõs√≠ƒçn√≠ m≈ô√≠≈æka
    const grid = document.getElementById('mainGrid'); grid.innerHTML = "";
    ["Po","√öt","St","ƒåt","P√°","So","Ne"].forEach(w => grid.innerHTML += `<div class="weekday">${w}</div>`);
    const first = (new Date(curYear, curMonth, 1).getDay() || 7) - 1, days = new Date(curYear, curMonth + 1, 0).getDate();
    for(let i=0; i<first; i++) grid.innerHTML += `<div></div>`;
    
    const names = new Set();
    for(let d=1; d<=days; d++) {
        const k = `${curMonth}-${d}`, evs = events[k] || [];
        const isToday = (d===new Date().getDate() && curMonth===new Date().getMonth() && curYear===new Date().getFullYear());
        let dots = ""; evs.forEach(e => { dots += `<div class="dot" style="background:${cats[e.type].c}"></div>`; names.add(e.n); });
        grid.innerHTML += `<div class="day ${isToday?'today':''}" onclick="openDay(${curMonth},${d})">
            <div class="day-num">${d}</div>
            <div class="nameday-label">${czNamedays[k] || ""}</div>
            <div class="dots">${dots}</div>
        </div>`;
    }

    // Roƒçn√≠ pohled - Rolovac√≠ karty
    const yearList = document.getElementById('yearScrollList'); yearList.innerHTML = "";
    for(let m=0; m<12; m++) {
        let mg = ""; const md = new Date(curYear, m+1, 0).getDate(), mf = (new Date(curYear, m, 1).getDay() || 7) - 1;
        for(let i=0; i<mf; i++) mg += `<div></div>`;
        for(let d=1; d<=md; d++) {
            const hasEv = events[`${m}-${d}`];
            mg += `<div style="padding:5px; border-radius:5px; ${hasEv ? 'background:'+cats[hasEv[0].type].c+'; color:#000; font-weight:bold;' : ''}">${d}</div>`;
        }
        yearList.innerHTML += `<div class="year-month-card">
            <div class="year-month-title">${months[m]}</div>
            <div style="display:grid; grid-template-columns:repeat(7, 1fr); gap:4px; font-size:12px; text-align:center;">${mg}</div>
        </div>`;
    }

    // Tagy jmen
    const nt = document.getElementById('nameTags'); nt.innerHTML = "";
    Array.from(names).sort().forEach(n => {
        nt.innerHTML += `<span class="tag-btn" onclick="alert('Budouc√≠ funkce: Filtr pro ${n}')">${n}</span>`;
    });
}
init();
</script>
</body>
</html>
