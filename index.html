<!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
<title>Family Calendar Samsung PRO</title>
<style>
:root {
  --bg: #000000;
  --panel: #161B26;
  --border: rgba(255, 255, 255, 0.1);
  --gold: #d99a3f;
  --text: #ffffff;
  --muted: #9aa6b6;
  --clr-bday: #f59e0b;
  --clr-nameday: #10b981;
  --clr-anniv: #ec4899;
  font-family: -apple-system, system-ui, sans-serif;
}

* { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

body {
  margin: 0; padding: 0;
  background-color: var(--bg);
  color: var(--text);
  overflow-x: hidden;
}

/* Navigace */
header {
  background: var(--panel);
  padding: 10px 10px 15px 10px;
  position: sticky; top: 0; z-index: 1000;
  border-bottom: 1px solid var(--border);
}

.brand { text-align: center; padding: 5px 0; font-weight: 900; color: var(--gold); letter-spacing: 1px; font-size: 14px; }

.view-switcher { display: flex; gap: 4px; background: #000; padding: 4px; border-radius: 12px; margin-bottom: 10px; }
.view-btn { flex: 1; border: none; background: transparent; color: #fff; padding: 12px; border-radius: 10px; font-weight: bold; font-size: 14px; }
.view-btn.active { background: var(--gold); color: #000; }

.controls { display: flex; gap: 6px; }
.btn, .select {
  background: #222; border: 1px solid var(--border);
  color: #fff; padding: 12px; border-radius: 10px; font-size: 16px; flex: 1; text-align: center;
}
.btn-gold { background: var(--gold); color: #000; font-weight: bold; border: none; }

/* Filtry osob */
.filter-bar { padding: 10px; background: #0a0a0a; overflow-x: auto; white-space: nowrap; border-bottom: 1px solid var(--border); }
.name-tags { display: flex; gap: 8px; }
.tag-btn { background: #222; border: 1px solid var(--border); color: var(--muted); padding: 6px 12px; border-radius: 20px; font-size: 12px; }

/* HLAVN√ç MƒöS√çƒåN√ç KALEND√Å≈ò - FULL WIDTH */
.container { width: 100%; }
.month-label { font-size: 24px; font-weight: 800; text-align: center; padding: 15px 0; color: #fff; }

.month-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 1px; background: var(--border); }
.weekday { background: var(--panel); color: var(--gold); text-align: center; font-weight: bold; font-size: 11px; padding: 10px 0; }

.day {
  background: var(--bg); min-height: 90px;
  display: flex; flex-direction: column; padding: 5px 2px;
}
.day.today { box-shadow: inset 0 0 0 2px var(--gold); z-index: 1; }
.day.weekend { background: #080808; }
.day-num { font-weight: 800; font-size: 18px; padding-left: 4px; }
.day.weekend .day-num { color: var(--gold); }

.nameday-label { font-size: 8px; color: var(--muted); padding: 0 4px; margin-bottom: 4px; height: 10px; overflow: hidden; }

.ev-tag {
  font-size: 9px; padding: 2px 4px; border-radius: 4px; color: #000;
  font-weight: bold; margin: 1px; overflow: hidden; text-overflow: ellipsis;
}

/* ROƒåN√ç POHLED - POD SEBOU */
#yearView { display: none; }
.mini-mo { width: 100%; background: var(--panel); margin-bottom: 15px; padding-bottom: 10px; }
.mini-title { color: var(--gold); font-size: 20px; font-weight: bold; padding: 15px; }
.mini-grid { display: grid; grid-template-columns: repeat(7, 1fr); text-align: center; }
.mini-day { padding: 10px 0; font-size: 14px; color: #555; }
.mini-day.has-ev { color: #fff; font-weight: bold; background: rgba(217, 154, 63, 0.2); border-radius: 5px; }

/* MODAL */
.modal-bg {
  position: fixed; inset: 0; background: rgba(0,0,0,0.9); backdrop-filter: blur(8px);
  display: none; align-items: center; justify-content: center; z-index: 2000;
}
.modal { background: #161b26; padding: 20px; border-radius: 24px; width: 92%; max-width: 400px; border: 1px solid var(--gold); }
.modal input, .modal select, .modal textarea {
  width: 100%; margin-bottom: 10px; padding: 15px; border-radius: 12px;
  background: #000; border: 1px solid var(--border); color: #fff; font-size: 16px;
}
</style>
</head>
<body>

<header>
  <div class="brand">RODINN√ù KALEND√Å≈ò</div>
  <div class="view-switcher">
    <button class="view-btn active" id="btnMonth" onclick="switchView('month')">MƒöS√çƒåN√ç</button>
    <button class="view-btn" id="btnYear" onclick="switchView('year')">ROƒåN√ç</button>
  </div>
  <div class="controls">
    <button class="btn" onclick="moveMonth(-1)">‚óÄ</button>
    <button class="btn btn-gold" onclick="goToday()">DNES</button>
    <button class="btn" onclick="moveMonth(1)">‚ñ∂</button>
  </div>
</header>

<div class="filter-bar">
  <div id="nameTags" class="name-tags"></div>
</div>

<div id="monthView" class="container">
  <div id="moLab" class="month-label">Leden 2026</div>
  <div class="month-grid" id="mainGrid"></div>
</div>

<div id="yearView" class="container"></div>

<div class="modal-bg" id="modalBg">
  <div class="modal">
    <h3 id="modalTitle" style="color:var(--gold); margin-top:0;">Detail dne</h3>
    <div id="eventList" style="margin-bottom:15px; max-height:250px; overflow-y:auto;"></div>
    
    <div id="editForm">
      <input type="text" id="addName" placeholder="Jm√©no...">
      <select id="addType">
        <option value="bday">üéÇ Narozeniny</option>
        <option value="nameday">üå∏ Sv√°tek</option>
        <option value="anniv">üíç V√Ωroƒç√≠</option>
      </select>
      <input type="number" id="addYear" placeholder="Rok narozen√≠ (pro vƒõk)">
      <textarea id="addNote" placeholder="Pozn√°mka..." rows="2"></textarea>
      <button class="btn btn-gold" style="width:100%" onclick="save()">ULO≈ΩIT</button>
    </div>
    <button onclick="closeModal()" style="width:100%; background:none; border:none; color:var(--muted); margin-top:15px;">Zav≈ô√≠t</button>
  </div>
</div>

<script>
// Data sv√°tk≈Ø
const czNamedays = {"0-1":"Nov√Ω rok","0-2":"Karina","0-3":"Radmila","0-4":"Diana","0-5":"Dalimil","0-6":"T≈ôi kr√°lov√©","0-7":"Vilma","0-8":"ƒåestm√≠r","0-9":"Vladan","0-10":"B≈ôetislav","0-11":"Bohdana","0-12":"Pravoslav","0-13":"Edita","0-14":"Radovan","0-15":"Alice","0-16":"Ctirad","0-17":"Drahoslav","0-18":"Vladislav","0-19":"Doubravka","0-20":"Ilona","0-21":"Bƒõla","0-22":"Slavom√≠r","0-23":"Zdenƒõk","0-24":"Milena","0-25":"Milo≈°","0-26":"Zora","0-27":"Ingrid","0-28":"Ot√Ωlie","0-29":"Zdislava","0-30":"Robin","0-31":"Marika","1-1":"Hynek","1-2":"Nela","1-3":"Bla≈æej","1-4":"Jarmila","1-5":"Dobromila","1-6":"Vanda","1-7":"Veronika","1-8":"Milada","1-9":"Apolena","1-10":"Mojm√≠r","1-11":"Bo≈æena","1-12":"Slavƒõna","1-13":"Vƒõnceslav","1-14":"Valent√Ωn","1-15":"Ji≈ôina","1-16":"Ljuba","1-17":"Miloslava","1-18":"Gizela","1-19":"Patrik","1-20":"Old≈ôich","1-21":"Lenka","1-22":"Petr","1-23":"Svatopluk","1-24":"Matƒõj","1-25":"Liliana","1-26":"Dorota","1-27":"Alexandr","1-28":"Lum√≠r","1-29":"Horym√≠r","2-1":"Bed≈ôich","2-2":"Ane≈æka","2-3":"Kamil","2-4":"Stela","2-5":"Kazim√≠r","2-6":"Miroslav","2-7":"Tom√°≈°","2-8":"Gabriela","2-9":"Franti≈°ka","2-10":"Viktorie","2-11":"Andƒõla","2-12":"≈òeho≈ô","2-13":"R≈Ø≈æena","2-14":"R√∫t","2-15":"Ida","2-16":"Elena","2-17":"Vlastimil","2-18":"Eduard","2-19":"Josef","2-20":"Svƒõtlana","2-21":"Radek","2-22":"Leona","2-23":"Ivona","2-24":"Gabriel","2-25":"Mari√°n","2-26":"Emanuel","2-27":"Dita","2-28":"So≈àa","2-29":"Ta≈•√°na","2-30":"Arno≈°t","2-31":"Kvido","3-1":"Hugo","3-2":"Erika","3-3":"Richard","3-4":"Ivana","3-5":"Miroslava","3-6":"Vendula","3-7":"He≈ôman","3-8":"Ema","3-9":"Du≈°an","3-10":"Darja","3-11":"Izabela","3-12":"Julius","3-13":"Ale≈°","3-14":"Vincenc","3-15":"Anast√°zie","3-16":"Irena","3-17":"Rudolf","3-18":"Val√©rie","3-19":"Rostislav","3-20":"Marcela","3-21":"Alexandra","3-22":"Ev≈æenie","3-23":"Vojtƒõch","3-24":"Ji≈ô√≠","3-25":"Marek","3-26":"Ota","3-27":"Jaroslav","3-28":"Vlastislav","3-29":"Robert","3-30":"Blahoslav","4-1":"Sv√°tek pr√°ce","4-2":"Zikmund","4-3":"Alexej","4-4":"Kvƒõtoslav","4-5":"Klaudie","4-6":"Radoslav","4-7":"Stanislav","4-8":"Den v√≠tƒõzstv√≠","4-9":"Ctibor","4-10":"Bla≈æena","4-11":"Svatava","4-12":"Pankr√°c","4-13":"Serv√°c","4-14":"Bonif√°c","4-15":"≈Ωofie","4-16":"P≈ôemysl","4-17":"Aneta","4-18":"Nata≈°a","4-19":"Ivo","4-20":"Zby≈°ek","4-21":"Monika","4-22":"Emil","4-23":"Vladim√≠r","4-24":"Jana","4-25":"Viola","4-26":"Filip","4-27":"Valdemar","4-28":"Vil√©m","4-29":"Maxmili√°n","4-30":"Ferdinand","5-1":"Laura","5-2":"Jarmil","5-3":"Tamara","5-4":"Dalibor","5-5":"Dobroslav","5-6":"Norbert","5-7":"Iveta","5-8":"Medard","5-9":"Stanislava","5-10":"Gita","5-11":"Bruno","5-12":"Antonie","5-13":"Anton√≠n","5-14":"Roland","5-15":"V√≠t","5-16":"Zbynƒõk","5-17":"Adolf","5-18":"Milan","5-19":"Leo≈°","5-20":"Kvƒõta","5-21":"Alois","5-22":"Pavla","5-23":"Zde≈àka","5-24":"Jan","5-25":"Ivan","5-26":"Adriana","5-27":"Ladislav","5-28":"Lubom√≠r","5-29":"Petr a Pavel","5-30":"≈†√°rka","6-1":"Jaroslava","6-2":"Patricie","6-3":"Radom√≠r","6-4":"Prokop","6-5":"Cyril a Metodƒõj","6-6":"Mistr Jan Hus","6-7":"Bohuslava","6-8":"Nora","6-9":"Drahoslava","6-10":"Libu≈°e","6-11":"Olga","6-12":"Bo≈ôek","6-13":"Mark√©ta","6-14":"Karol√≠na","6-15":"Jind≈ôich","6-16":"Lubo≈°","6-17":"Martina","6-18":"Drahom√≠ra","6-19":"ƒåenƒõk","6-20":"Ilja","6-21":"V√≠tƒõzslav","6-22":"Magdal√©na","6-23":"Libor","6-24":"Krist√Ωna","6-25":"Jakub","6-26":"Anna","6-27":"Alena","6-28":"Viktor","6-29":"Marta","6-30":"Bo≈ôivoj","7-1":"Oskar","7-2":"Gustav","7-3":"Milu≈°e","7-4":"Dominik","7-5":"Kristi√°n","7-6":"Old≈ôi≈°ka","7-7":"Lada","7-8":"Sobƒõslav","7-9":"Roman","7-10":"Vav≈ôinec","7-11":"Zuzana","7-12":"Kl√°ra","7-13":"Alena","7-14":"Alan","7-15":"Hana","7-16":"J√°chym","7-17":"Petra","7-18":"Helena","7-19":"Ludv√≠k","7-20":"Bernard","7-21":"Johana","7-22":"Bohuslav","7-23":"Sandra","7-24":"Bartolomƒõj","7-25":"Radim","7-26":"Ludƒõk","7-27":"Otakar","7-28":"August√Ωn","7-29":"Evel√≠na","7-30":"Vladƒõna","7-31":"Pavl√≠na","8-1":"Linda","8-2":"Ad√©la","8-3":"Bronislav","8-4":"Jind≈ôi≈°ka","8-5":"Boris","8-6":"Boleslav","8-7":"Reg√≠na","8-8":"Mariana","8-9":"Daniela","8-10":"Irma","8-11":"Denisa","8-12":"Marie","8-13":"Lubor","8-14":"Radka","8-15":"Jolana","8-16":"Ludmila","8-17":"Nadƒõ≈æda","8-18":"Kry≈°tof","8-19":"Zita","8-20":"Oleg","8-21":"Matou≈°","8-22":"Darina","8-23":"Berta","8-24":"Jarom√≠r","8-25":"Zlata","8-26":"Andrea","8-27":"Jon√°≈°","8-28":"V√°clav","8-29":"Michal","8-30":"Jeron√Ωm","9-1":"Igor","9-2":"Ol√≠vie","9-3":"Bohumil","9-4":"Franti≈°ek","9-5":"Eli≈°ka","9-6":"Hanu≈°","9-7":"Just√Ωna","9-8":"Vƒõra","9-9":"≈†tefan","9-10":"Marina","9-11":"Andrej","9-12":"Marcel","9-13":"Ren√°ta","9-14":"Ag√°ta","9-15":"Tereza","9-16":"Havel","9-17":"Hedvika","9-18":"Luk√°≈°","9-19":"Michaela","9-20":"Vendel√≠n","9-21":"Brigita","9-22":"Sabina","9-23":"Teodor","9-24":"Nina","9-25":"Be√°ta","9-26":"Erik","9-27":"≈†arlota","9-28":"St√°tn√≠ sv√°tek","9-29":"Silvie","9-30":"Tade√°≈°","10-1":"Felix","10-2":"Pam√°tka zesnul√Ωch","10-3":"Hubert","10-4":"Karel","10-5":"Miriam","10-6":"Libƒõna","10-7":"Saskie","10-8":"Bohum√≠r","10-9":"Bohdan","10-10":"Marina","10-11":"Martin","10-12":"Benedikt","10-13":"Tibor","10-14":"S√°va","10-15":"Leopold","10-16":"Otmar","10-17":"Mahulena","10-18":"Romana","10-19":"Al≈æbƒõta","10-20":"Nikola","10-21":"Albert","10-22":"Cec√≠lie","10-23":"Klement","10-24":"Em√≠lie","10-25":"Kate≈ôina","10-26":"Artur","10-27":"Xenie","10-28":"Den vzniku ƒåR","10-29":"Zina","10-30":"Ond≈ôej","11-1":"Iva","11-2":"Blanka","11-3":"Svatoslav","11-4":"Barbora","11-5":"Jitka","11-6":"Mikul√°≈°","11-7":"Ambro≈æ","11-8":"Kvƒõtoslava","11-9":"Vratislav","11-10":"Julie","11-11":"Dana","11-12":"Simona","11-13":"Lucie","11-14":"L√Ωdie","11-15":"Radana","11-16":"Alb√≠na","11-17":"Daniel","11-18":"Miloslav","11-19":"Ester","11-20":"Dagmar","11-21":"Nat√°lie","11-22":"≈†imon","11-23":"Vlasta","11-24":"Adam a Eva","11-25":"Bo≈æ√≠ hod","11-26":"≈†tƒõp√°n","11-27":"≈Ωaneta","11-28":"Bohumila","11-29":"Judita","11-30":"David","11-31":"Silvestr"};

const months = ["Leden","√önor","B≈ôezen","Duben","Kvƒõten","ƒåerven","ƒåervenec","Srpen","Z√°≈ô√≠","≈ò√≠jen","Listopad","Prosinec"];
const cats = { bday: { c: 'var(--clr-bday)', i: 'üéÇ' }, nameday: { c: 'var(--clr-nameday)', i: 'üå∏' }, anniv: { c: 'var(--clr-anniv)', i: 'üíç' } };
let curYear = 2026, curMonth = new Date().getMonth();
let events = JSON.parse(localStorage.getItem('family_cal_vPRO') || '{}');
let activeKey = "";

function switchView(type) {
  document.getElementById('monthView').style.display = type === 'month' ? 'block' : 'none';
  document.getElementById('yearView').style.display = type === 'year' ? 'block' : 'none';
  document.getElementById('btnMonth').classList.toggle('active', type === 'month');
  document.getElementById('btnYear').classList.toggle('active', type === 'year');
  if(type === 'year') renderYear();
}

function render() {
  document.getElementById('moLab').innerText = `${months[curMonth]} ${curYear}`;
  const grid = document.getElementById('mainGrid'); grid.innerHTML = "";
  ["PO","√öT","ST","ƒåT","P√Å","SO","NE"].forEach(w => grid.innerHTML += `<div class="weekday">${w}</div>`);

  const first = (new Date(curYear, curMonth, 1).getDay() || 7) - 1;
  const days = new Date(curYear, curMonth + 1, 0).getDate();

  for(let i=0; i<first; i++) grid.innerHTML += `<div class="day" style="opacity:0.2"></div>`;
  
  const names = new Set();
  for(let d=1; d<=days; d++) {
    const k = `${curMonth}-${d}`, evs = events[k] || [];
    const dateObj = new Date(curYear, curMonth, d);
    const isToday = (d===new Date().getDate() && curMonth===new Date().getMonth() && curYear===new Date().getFullYear());
    const isWeekend = (dateObj.getDay() === 0 || dateObj.getDay() === 6);
    
    let h = ""; 
    evs.forEach(e => {
      const age = (e.type==='bday' && e.y) ? ` ${curYear - e.y}` : "";
      h += `<div class="ev-tag" style="background:${cats[e.type].c}">${cats[e.type].i}${e.n.substring(0,5)}${age}</div>`;
      names.add(e.n);
    });

    grid.innerHTML += `
      <div class="day ${isToday?'today':''} ${isWeekend?'weekend':''}" onclick="openEdit(${curMonth},${d})">
        <div class="day-num">${d}</div>
        <div class="nameday-label">${czNamedays[k] || ""}</div>
        ${h}
      </div>`;
  }
  renderTags(names);
}

function renderYear() {
  const yv = document.getElementById('yearView'); yv.innerHTML = "";
  for(let m=0; m<12; m++) {
    const md = new Date(curYear, m+1, 0).getDate();
    const mf = (new Date(curYear, m, 1).getDay() || 7) - 1;
    let dHtml = "";
    for(let i=0; i<mf; i++) dHtml += `<div></div>`;
    for(let d=1; d<=md; d++) {
      const has = events[`${m}-${d}`];
      dHtml += `<div class="mini-day ${has?'has-ev':''}" onclick="goToMonth(${m})">${d}</div>`;
    }
    yv.innerHTML += `
      <div class="mini-mo">
        <div class="mini-title">${months[m]}</div>
        <div class="mini-grid">${dHtml}</div>
      </div>`;
  }
}

function renderTags(names) {
  const nt = document.getElementById('nameTags'); nt.innerHTML = "";
  Array.from(names).sort().forEach(n => {
    nt.innerHTML += `<button class="tag-btn" onclick="openPersonFilter('${n}')">${n}</button>`;
  });
}

function openEdit(m, d) {
  activeKey = `${m}-${d}`;
  document.getElementById('modalTitle').innerText = `${d}. ${months[m]} ${czNamedays[activeKey] ? ' - '+czNamedays[activeKey] : ''}`;
  document.getElementById('editForm').style.display = "block";
  const list = document.getElementById('eventList'); list.innerHTML = "";
  (events[activeKey] || []).forEach((ev, i) => {
    const age = (ev.type==='bday' && ev.y) ? ` (${curYear - ev.y} let)` : "";
    list.innerHTML += `<div style="background:${cats[ev.type].c}; color:#000; padding:12px; border-radius:10px; margin-bottom:8px; font-weight:bold;">
      <div style="display:flex; justify-content:space-between"><span>${cats[ev.type].i} ${ev.n}${age}</span><span onclick="delEv('${activeKey}',${i})" style="padding:0 10px">‚úï</span></div>
      ${ev.note ? `<div style="font-weight:normal; font-size:12px; margin-top:5px; border-top:1px solid rgba(0,0,0,0.1)">${ev.note}</div>` : ''}
    </div>`;
  });
  document.getElementById('modalBg').style.display = "flex";
}

function openPersonFilter(name) {
  document.getElementById('modalTitle').innerText = `Ud√°losti: ${name}`;
  document.getElementById('editForm').style.display = "none";
  const list = document.getElementById('eventList'); list.innerHTML = "";
  for (let key in events) {
    events[key].forEach(ev => {
      if(ev.n === name) {
        const [m, d] = key.split('-');
        list.innerHTML += `<div style="border-left:4px solid ${cats[ev.type].c}; background:rgba(255,255,255,0.05); padding:10px; margin-bottom:10px;">
          <div style="color:var(--gold); font-size:11px">${d}. ${months[m]}</div>
          <div>${cats[ev.type].i} ${ev.type=='bday'?'Narozeniny':'Ud√°lost'}</div>
        </div>`;
      }
    });
  }
  document.getElementById('modalBg').style.display = "flex";
}

function save() {
  const n = document.getElementById('addName').value.trim(); if(!n) return;
  if(!events[activeKey]) events[activeKey] = [];
  events[activeKey].push({ n, type: document.getElementById('addType').value, y: parseInt(document.getElementById('addYear').value), note: document.getElementById('addNote').value });
  localStorage.setItem('family_cal_vPRO', JSON.stringify(events));
  document.getElementById('addName').value = ""; document.getElementById('addYear').value = ""; document.getElementById('addNote').value = "";
  openEdit(...activeKey.split('-')); render();
}

function delEv(key, i) { events[key].splice(i,1); if(!events[key].length) delete events[key]; localStorage.setItem('family_cal_vPRO', JSON.stringify(events)); openEdit(...key.split('-')); render(); }
function goToMonth(m) { curMonth = m; switchView('month'); render(); }
function moveMonth(v) { curMonth+=v; if(curMonth>11){curMonth=0;curYear++} if(curMonth<0){curMonth=11;curYear--} render(); }
function goToday() { const n=new Date(); curYear=n.getFullYear(); curMonth=n.getMonth(); render(); }
function closeModal() { document.getElementById('modalBg').style.display = "none"; }

render();
</script>
</body>
</html>
